<main class="page">
  @if (project(); as p) {
    <div class="layout">

      <aside class="left">
        <button class="back" type="button" (click)="back()">Back</button>
        <div class="title">{{ p.title }}</div>
        <div class="desc">{{ p.description }}</div>
        @if (p.techStack?.length) {
          <div class="title">Tech Stack</div>
          <div class="techStack">
            @for (tech of p.techStack; track tech) {
              <span class="tech">{{ tech }}</span>
            }
          </div>
        }
        @if (p.links?.length) {
          <div class="title">Links</div>
          <div class="links">
            @for (link of p.links; track link.url) {
              <a class="link" [href]="link.url" target="_blank" rel="noopener noreferrer">
                {{ link.label }}
              </a>
            }
          </div>
        }
      </aside>

      <section class="right">
        <div class="gallery">
          @for (item of (p.gallery ?? []); track item) {
            @if (isMp4(item)) {
              <video class="shot" [attr.aria-label]="p.title" controls preload="metadata" playsinline>
                <source [src]="item" type="video/mp4" />
              </video>
            } @else {
              <img class="shot" [src]="item" [alt]="p.title" loading="lazy" />
            }
          }
        </div>
      </section>
    </div>
  } @else {
    <div class="notFound">
      <div class="title">Project not found</div>
      <div class="desc">This slug doesnâ€™t match any project in your data file yet.</div>
    </div>
  }
</main>

